<!DOCTYPE HTML>
<html lang="ru">
<head>
  <meta charset="utf-8">
  
  <title>Страница 6 | Cool Software Blog</title>
  <meta name="author" content="Vitaly Yakovlev">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Cool Software Blog"/>

  
    <meta property="og:image" content=""/>
  

  <link rel="shortcut icon" href="/favicon.png">
  
    <link rel="alternate" href="/atom.xml" title="Cool Software Blog" type="application/atom+xml">
  
  
<link rel="stylesheet" href="/css/style.css">

  <!--[if lt IE 9]><script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script><![endif]-->
  

<meta name="generator" content="Hexo 6.0.0"></head>


<body>
  <header id="header" class="inner"><div id="title-wrapper">
  <div class="alignleft">
    <div id="title"><a href="/"><img src="/images/coolsoftware-blog.png" /></a></div>
    <h2><a href="/">Записки программиста</a></h2>
  </div>
  <nav id="main-nav" class="alignright">
    <ul>
      
        
        <li><a href="/archives">Архив</a></li>
      
        
        <li><a href="/search"><span class="menuicon"></span></a></li>
      
        
        <li><a href="/atom.xml" target="_blank"><span class="menuicon"></span></a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article id="post-oddeven-game-smart-contract" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2019-04-24T09:23:00.000Z"><a href="/2019/04/oddeven-game-smart-contract/">2019-04-24</a></time>
      
      
  
    <h1 class="title"><a href="/2019/04/oddeven-game-smart-contract/">OddEven Game (Smart Contract)</a></h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <div style="text-align: left;">Для изучения смарт-контрактов и возможностей написания приложений с их использованием, написал простенькую игру: "Чет-Нечет" (Odd-Even).</div>

<p>Тут: <a target="_blank" rel="noopener" href="http://oddeven.coolsoftware.ru/web3/">http://oddeven.coolsoftware.ru/web3/</a></p>
<p><strong>Update.</strong> Игра больше недоступна. Исходники, если будет время, опубликую на github.</p>
<h3 id="Правила"><a href="#Правила" class="headerlink" title="Правила"></a>Правила</h3><p>В игре участвуют двое: “банкир” и игрок. За банкира играет сервис на PHP.<br>Банкир загадывает число, и записывает в смарт-контракт хэш от него. Затем игрок вводит свое число, которое отправляется в смарт-контракт. Потом “банкир” сообщает смарт-контракту загаданное им число (которое должно совпасть с хэшем). В конце определяется победитель: если игрок и банкир оба загадали четное число, или оба загадали нечетное число (иными словами: игрок угадал, загадал ли банкир четное число или нечетное), то выиграл игрок. Иначе выиграл банкир.</p>
<p>Смарт-контракт опубликован в тестовой сети rinkeby: <a target="_blank" rel="noopener" href="https://rinkeby.etherscan.io/address/0x7a21ff65b1c509c2236aeaad47e1c938e6dd921c">https://rinkeby.etherscan.io/address/0x7a21ff65b1c509c2236aeaad47e1c938e6dd921c</a></p>
<p>Для игры игроку нужно установить MetaMask (<a target="_blank" rel="noopener" href="https://metamask.io/">https://metamask.io/</a>) и завести аккаунт в сети rinkeby. Получить (бесплатно) ETH в этой тестовой сети можно тут: <a target="_blank" rel="noopener" href="https://www.rinkeby.io/#faucet">https://www.rinkeby.io/#faucet</a></p>
<p>=&#x3D;&#x3D;<br>Перепечатка материалов блога разрешается с обязательной ссылкой на <a href="http://blog.coolsoftware.ru/">blog.coolsoftware.ru</a></p>

      
    </div>
    <footer>
      
        
        
      
      
      
  
  <div class="tags">
    <a href="/tags/ethereum/">ethereum</a>, <a href="/tags/smart-contract/">smart contract</a>, <a href="/tags/oddeven/">oddeven</a>, <a href="/tags/rinkeby/">rinkeby</a>
  </div>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article id="post-request-eth-rinkeby" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2019-04-19T13:23:00.000Z"><a href="/2019/04/request-eth-rinkeby/">2019-04-19</a></time>
      
      
  
    <h1 class="title"><a href="/2019/04/request-eth-rinkeby/">Request ETH (rinkeby)</a></h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <p>Получить ETH в тестовой сети rinkeby можно тут: <a target="_blank" rel="noopener" href="https://www.rinkeby.io/#faucet">https://www.rinkeby.io/#faucet</a><br>Надо указать ссылку на пост с адресом для получения, типа такого: <a target="_blank" rel="noopener" href="https://twitter.com/vit_cs/status/1119231148654301184">https://twitter.com/vit_cs&#x2F;status&#x2F;1119231148654301184</a><br>=&#x3D;&#x3D;<br>Перепечатка материалов блога разрешается с обязательной ссылкой на <a href="http://blog.coolsoftware.ru/">blog.coolsoftware.ru</a></p>

      
    </div>
    <footer>
      
        
        
      
      
      
  
  <div class="tags">
    <a href="/tags/ethereum/">ethereum</a>, <a href="/tags/rinkeby/">rinkeby</a>, <a href="/tags/faucet/">faucet</a>
  </div>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article id="post-ethereum-php" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2019-04-12T10:21:00.000Z"><a href="/2019/04/ethereum-php/">2019-04-12</a></time>
      
      
  
    <h1 class="title"><a href="/2019/04/ethereum-php/">Ethereum и PHP</a></h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <p>Полезные ссылки:  </p>
<p>API client lib for communication with geth (go-ethereum) node<br><a target="_blank" rel="noopener" href="https://github.com/petrhejna/geth-jsonrpc-php-client">https://github.com/petrhejna/geth-jsonrpc-php-client</a>  </p>
<p>PHP interface to Ethereum JSON-RPC API<br><a target="_blank" rel="noopener" href="https://github.com/digitaldonkey/ethereum-php">https://github.com/digitaldonkey/ethereum-php</a>  </p>
<p>A php interface for interacting with the Ethereum blockchain and ecosystem<br><a target="_blank" rel="noopener" href="https://github.com/sc0Vu/web3.php">https://github.com/sc0Vu/web3.php</a>  </p>
<p>Устанавливаются библиотеки с пом. композера, брать его тут: <a target="_blank" rel="noopener" href="https://getcomposer.org/">https://getcomposer.org/</a>  </p>
<p>Подключается установленная с пом. композера либа так:  </p>
<p>&amp;#60;?php require_once __DIR__ . ‘&#x2F;vendor&#x2F;autoload.php’; ?&amp;#62;  </p>
<p>=&#x3D;&#x3D;<br>Перепечатка материалов блога разрешается с обязательной ссылкой на <a href="http://blog.coolsoftware.ru/">blog.coolsoftware.ru</a></p>

      
    </div>
    <footer>
      
        
        
      
      
      
  
  <div class="tags">
    <a href="/tags/ethereum/">ethereum</a>, <a href="/tags/smart-contract/">smart contract</a>, <a href="/tags/php/">PHP</a>
  </div>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article id="post-gui-web" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2019-03-26T13:53:00.000Z"><a href="/2019/03/gui-web/">2019-03-26</a></time>
      
      
  
    <h1 class="title"><a href="/2019/03/gui-web/">Связь GUI (web) и смарт-контракта.</a></h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <p>Видео-туториал тут: <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=hcTPjpPvas8">https://www.youtube.com/watch?v=hcTPjpPvas8</a>  </p>
<p>Парочка замечаний:  </p>
<p>1. Устанавливать надо версию web3 0.20.6 (в версии 0.20.7 можем получить ошибку: Access to XMLHttpRequest at ‘<a target="_blank" rel="noopener" href="http://localhost:8545/&#39;">http://localhost:8545/&#39;</a> from origin ‘null’ has been blocked by CORS policy: Response to preflight request doesn’t pass access control check: The value of the ‘Access-Control-Allow-Origin’ header in the response must not be the wildcard ‘*‘ when the request’s credentials mode is ‘include’. The credentials mode of requests initiated by the XMLHttpRequest is controlled by the withCredentials attribute.)  </p>
<p>2. Чтобы установился dist\web3.min.js нужно при установке добавлять ключ –verbose.  </p>
<p>Резюмируя: npm install <a href="mailto:&#119;&#101;&#98;&#x33;&#64;&#48;&#46;&#50;&#48;&#x2e;&#54;">&#119;&#101;&#98;&#x33;&#64;&#48;&#46;&#50;&#48;&#x2e;&#54;</a> –save –verbose  </p>
<p>=&#x3D;&#x3D;<br>Перепечатка материалов блога разрешается с обязательной ссылкой на <a href="http://blog.coolsoftware.ru/">blog.coolsoftware.ru</a></p>

      
    </div>
    <footer>
      
        
        
      
      
      
  
  <div class="tags">
    <a href="/tags/ethereum/">ethereum</a>, <a href="/tags/smart-contract/">smart contract</a>, <a href="/tags/web3/">web3</a>
  </div>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article id="post-smart-contract" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2019-03-25T12:26:00.000Z"><a href="/2019/03/smart-contract/">2019-03-25</a></time>
      
      
  
    <h1 class="title"><a href="/2019/03/smart-contract/">Первый Smart Contract</a></h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <p>Годное введение здесь: <a target="_blank" rel="noopener" href="https://codeburst.io/build-your-first-ethereum-smart-contract-with-solidity-tutorial-94171d6b1c4b">Build Your First Ethereum Smart Contract with Solidity</a>  </p>
<p>Пара замечаний:  </p>
<p>1. Для подсоединения к запущенной ноде надо использовать:  </p>
<p>    geth attach ipc:\\.\pipe\geth.ipc  </p>
<p>Если же просто выполнить geth attach, то получим ошибку: Unable to attach to remote geth: no known transport for URL scheme “c” (это верно для версии geth 1.8.23).  </p>
<p>2. Mist лучше устанавливать 0.9.3, а не 0.11.1. В последнем при попытке вызвать методы созданного смарт контракта выводится ошибка: Couldn’t estimate gas, resorting to default parameters. Transaction is likely cheaper than the estimate. И в дальнейшем состояние “counter” контракта из примера не изменяется (остается всегда 5). В версии Mist 0.9.3 все OK.  </p>
<p>Upd. Под Win10 Mist 0.11.1 работает OK. Правда, после установки Mist изругался: “Checksum mismatch in downloaded node. Please install the Geth node version 1.8.23 manually”. Пришлось переустанавливать geth. Причем, устанавливать надо 64-битную версию. Иначе при попытке запустить майнер можно получить ошибку: “Fatal Error:Not enough storage is available”  </p>
<p>Полезные ссылки:  </p>
<p>Go-Ethereum Management APIs: <a target="_blank" rel="noopener" href="https://github.com/ethereum/go-ethereum/wiki/Management-APIs">https://github.com/ethereum/go-ethereum/wiki/Management-APIs</a><br>Solidity 0.5.3 documentation: <a target="_blank" rel="noopener" href="https://solidity.readthedocs.io/en/v0.5.3/contracts.html">https://solidity.readthedocs.io/en/v0.5.3/contracts.html</a>  </p>
<p>=&#x3D;&#x3D;<br>Перепечатка материалов блога разрешается с обязательной ссылкой на <a href="http://blog.coolsoftware.ru/">blog.coolsoftware.ru</a></p>

      
    </div>
    <footer>
      
        
        
      
      
      
  
  <div class="tags">
    <a href="/tags/ethereum/">ethereum</a>, <a href="/tags/smart-contract/">smart contract</a>, <a href="/tags/geth/">geth</a>, <a href="/tags/mist/">mist</a>
  </div>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article id="post-asus-tinker-board" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2018-01-11T08:08:00.000Z"><a href="/2018/01/asus-tinker-board/">2018-01-11</a></time>
      
      
  
    <h1 class="title"><a href="/2018/01/asus-tinker-board/">ASUS Tinker Board</a></h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://2.bp.blogspot.com/-KX8VQbtSdZA/Wlcbb5q53RI/AAAAAAAAAWc/ARpGSCurVVIYanGthZg0_0wEGOu0SFz6ACLcBGAs/s1600/IMG_20180111_114847.jpg"><img src="https://2.bp.blogspot.com/-KX8VQbtSdZA/Wlcbb5q53RI/AAAAAAAAAWc/ARpGSCurVVIYanGthZg0_0wEGOu0SFz6ACLcBGAs/s320/IMG_20180111_114847.jpg"></a></p>
<p><a target="_blank" rel="noopener" href="https://4.bp.blogspot.com/-nIROh1z1je8/WlcbbmovouI/AAAAAAAAAWY/o640qYZFhcwtZktO3iL80G1i2BbIKD28ACLcBGAs/s1600/IMG_20180111_115033.jpg"><img src="https://4.bp.blogspot.com/-nIROh1z1je8/WlcbbmovouI/AAAAAAAAAWY/o640qYZFhcwtZktO3iL80G1i2BbIKD28ACLcBGAs/s320/IMG_20180111_115033.jpg"></a></p>
<p><a target="_blank" rel="noopener" href="https://3.bp.blogspot.com/-TWLC_rSYh6M/WlcbbvIinoI/AAAAAAAAAWg/B8RFyxQ2y2cNWLJyR4ZnNFbHyaIVChQYQCLcBGAs/s1600/IMG_20180111_115045.jpg"><img src="https://3.bp.blogspot.com/-TWLC_rSYh6M/WlcbbvIinoI/AAAAAAAAAWg/B8RFyxQ2y2cNWLJyR4ZnNFbHyaIVChQYQCLcBGAs/s320/IMG_20180111_115045.jpg"></a></p>
<p><a target="_blank" rel="noopener" href="https://1.bp.blogspot.com/-TJDQ0sCC-RI/WlcbcsyJ5FI/AAAAAAAAAWk/uUeguZi6zZUiM_oQ-9LM424CU0XXx7SFACLcBGAs/s1600/IMG_20180111_115108.jpg"><img src="https://1.bp.blogspot.com/-TJDQ0sCC-RI/WlcbcsyJ5FI/AAAAAAAAAWk/uUeguZi6zZUiM_oQ-9LM424CU0XXx7SFACLcBGAs/s320/IMG_20180111_115108.jpg"></a></p>
<p>=&#x3D;&#x3D;<br>Перепечатка материалов блога разрешается с обязательной ссылкой на <a href="http://blog.coolsoftware.ru/">blog.coolsoftware.ru</a></p>

      
    </div>
    <footer>
      
        
        
      
      
      
  
  <div class="tags">
    <a href="/tags/asus/">ASUS</a>, <a href="/tags/tinker-board/">Tinker Board</a>
  </div>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article id="post-delphi-xe2-md4md5-bug-on-x64" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2017-08-07T05:38:00.000Z"><a href="/2017/08/delphi-xe2-md4md5-bug-on-x64/">2017-08-07</a></time>
      
      
  
    <h1 class="title"><a href="/2017/08/delphi-xe2-md4md5-bug-on-x64/">[Delphi XE2] MD4/MD5 Bug on x64</a></h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <p>В библиотеке Indy, которая поставляется с  Delphi XE2 под 64-битной платформой, имеется баг в вычислении MD4&#x2F;MD5 (компоненты TIdHashMessageDigest4, TIdHashMessageDigest5 соответственно).  </p>
<p>Вот код для вычисления MD5:  </p>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span></span><br><span class="line">  md5indy: TIdHashMessageDigest5;</span><br><span class="line">  sMD5: <span class="keyword">String</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  md5indy := TIdHashMessageDigest5.Create;</span><br><span class="line">  sMD5 := md5indy.HashStringAsHex(<span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line">  md5indy.Free;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<p>Под Win32 результат будет: ‘e10adc3949ba59abbe56e057f20f883e’ (правильно)<br>Под Win64 результат будет: ‘6e692400e5c684b74314252e341b92c7’ (ошибка)  </p>
<p>Этот баг был исправлен в более поздних версиях версиях Indy&#x2F;Delphi (не скажу точно, в какой именно, в Delphi 10.2 Tokyo его нет).</p>
<p>Баг в asm-функциях ROL и ROR в модуле IdGlobalProtocols. Вот как они выглядят в XE2:</p>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Arg1=EAX, Arg2=DL</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ROL</span><span class="params">(<span class="keyword">const</span> AVal: LongWord; AShift: Byte)</span>:</span> LongWord; <span class="keyword">assembler</span>;</span><br><span class="line"><span class="keyword">asm</span></span><br><span class="line">  mov  cl, dl</span><br><span class="line">  rol  eax, cl</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ROR</span><span class="params">(<span class="keyword">const</span> AVal: LongWord; AShift: Byte)</span>:</span> LongWord; <span class="keyword">assembler</span>;</span><br><span class="line"><span class="keyword">asm</span></span><br><span class="line">  mov  cl, dl</span><br><span class="line">  ror  eax, cl</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="meta">&#123;$ENDIF&#125;</span></span><br></pre></td></tr></table></figure>

<p>А вот так это выглядит в Delpgi 10.2 Tokyo:</p>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 32-bit: Arg1=EAX, Arg2=DL</span></span><br><span class="line"><span class="comment">// 64-bit: Arg1=ECX, Arg2=DL</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ROL</span><span class="params">(<span class="keyword">const</span> AVal: UInt32; AShift: Byte)</span>:</span> UInt32; <span class="keyword">assembler</span>;</span><br><span class="line"><span class="keyword">asm</span></span><br><span class="line">  <span class="meta">&#123;$IFDEF CPU64&#125;</span></span><br><span class="line">  mov eax, ecx</span><br><span class="line">  <span class="meta">&#123;$ENDIF&#125;</span></span><br><span class="line">  mov  cl, dl</span><br><span class="line">  rol  eax, cl</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ROR</span><span class="params">(<span class="keyword">const</span> AVal: UInt32; AShift: Byte)</span>:</span> UInt32; <span class="keyword">assembler</span>;</span><br><span class="line"><span class="keyword">asm</span></span><br><span class="line">  <span class="meta">&#123;$IFDEF CPU64&#125;</span></span><br><span class="line">  mov eax, ecx</span><br><span class="line">  <span class="meta">&#123;$ENDIF&#125;</span></span><br><span class="line">  mov  cl, dl</span><br><span class="line">  ror  eax, cl</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<p>Чтобы можно было генерировать MD4&#x2F;MD5 в XE2 под Win64 без установки новой версии Indy, я сделал модуль IdHashMessageDigestEx с “исправленными” классами TIdHashMessageDigest4Ex и TIdHashMessageDigest5Ex, которыми следует пользоваться вместо TIdHashMessageDigest4 и TIdHashMessageDigest5 соответственно. Замечу, что в XE2 не работает макрос CPU64 (как в более поздних версиях Delphi), а работает CPUX64.  </p>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">unit</span> IdHashMessageDigestEx;</span><br><span class="line"><span class="keyword">interface</span></span><br><span class="line"><span class="keyword">uses</span></span><br><span class="line">  IdFIPS, IdHashMessageDigest;</span><br><span class="line"><span class="keyword">type</span></span><br><span class="line"><span class="meta">&#123;$IFDEF VER230&#125;</span> <span class="comment">//XE2</span></span><br><span class="line">  <span class="title">TIdHashMessageDigest4Ex</span> = <span class="keyword">class</span>(TIdHashMessageDigest4)</span><br><span class="line">  <span class="keyword">protected</span></span><br><span class="line">    <span class="function"><span class="keyword">procedure</span> <span class="title">MDCoder</span>;</span> <span class="keyword">override</span>;</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line">  <span class="title">TIdHashMessageDigest5Ex</span> = <span class="keyword">class</span>(TIdHashMessageDigest4Ex)</span><br><span class="line">  <span class="keyword">protected</span></span><br><span class="line">    <span class="function"><span class="keyword">procedure</span> <span class="title">MDCoder</span>;</span> <span class="keyword">override</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">InitHash</span> :</span> TIdHashIntCtx; <span class="keyword">override</span>;</span><br><span class="line">  <span class="keyword">public</span></span><br><span class="line">    <span class="keyword">class</span> <span class="function"><span class="keyword">function</span> <span class="title">IsIntfAvailable</span> :</span> Boolean; <span class="keyword">override</span>;</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line"><span class="meta">&#123;$ELSE&#125;</span></span><br><span class="line">  TIdHashMessageDigest4Ex = TIdHashMessageDigest4;</span><br><span class="line">  TIdHashMessageDigest5Ex = TIdHashMessageDigest5;</span><br><span class="line"><span class="meta">&#123;$ENDIF&#125;</span></span><br><span class="line"><span class="keyword">implementation</span></span><br><span class="line"><span class="meta">&#123;$IFDEF VER230&#125;</span> <span class="comment">//XE2</span></span><br><span class="line"><span class="meta">&#123;$IFDEF NO_NATIVE_ASM)&#125;</span> <span class="comment">//XE2</span></span><br><span class="line"><span class="keyword">uses</span> IdGlobalProtocols;</span><br><span class="line"><span class="meta">&#123;$ELSE&#125;</span></span><br><span class="line"><span class="comment">// 32-bit: Arg1=EAX, Arg2=DL</span></span><br><span class="line"><span class="comment">// 64-bit: Arg1=ECX, Arg2=DL</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ROL</span><span class="params">(<span class="keyword">const</span> AVal: LongWord; AShift: LongWord)</span>:</span> LongWord; <span class="keyword">assembler</span>;</span><br><span class="line"><span class="keyword">asm</span></span><br><span class="line">  <span class="meta">&#123;$IFDEF CPUX64&#125;</span></span><br><span class="line">  mov eax, ecx</span><br><span class="line">  <span class="meta">&#123;$ENDIF&#125;</span></span><br><span class="line">  mov  cl, dl</span><br><span class="line">  rol  eax, cl</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="meta">&#123;$ENDIF&#125;</span></span><br><span class="line"><span class="comment">&#123; TIdHashMessageDigest4Ex &#125;</span></span><br><span class="line"><span class="meta">&#123;$Q-&#125;</span> <span class="comment">// Arithmetic operations performed modulo $100000000</span></span><br><span class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">TIdHashMessageDigest4Ex</span>.<span class="title">MDCoder</span>;</span></span><br><span class="line"><span class="keyword">var</span></span><br><span class="line">  A, B, C, D, i : LongWord;</span><br><span class="line">  buff : T16x4LongWordRecord; <span class="comment">// 64-byte buffer</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  A := FState[<span class="number">0</span>];</span><br><span class="line">  B := FState[<span class="number">1</span>];</span><br><span class="line">  C := FState[<span class="number">2</span>];</span><br><span class="line">  D := FState[<span class="number">3</span>];</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span> <span class="keyword">to</span> <span class="number">15</span> <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">begin</span></span><br><span class="line">    buff[i] := FCBuffer[i*<span class="number">4</span>+<span class="number">0</span>] +</span><br><span class="line">               (FCBuffer[i*<span class="number">4</span>+<span class="number">1</span>] <span class="keyword">shl</span> <span class="number">8</span>) +</span><br><span class="line">               (FCBuffer[i*<span class="number">4</span>+<span class="number">2</span>] <span class="keyword">shl</span> <span class="number">16</span>) +</span><br><span class="line">               (FCBuffer[i*<span class="number">4</span>+<span class="number">3</span>] <span class="keyword">shl</span> <span class="number">24</span>);</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line">  <span class="comment">// Round 1</span></span><br><span class="line">  <span class="comment">&#123; <span class="doctag">Note:</span></span></span><br><span class="line"><span class="comment">      (x and y) or ( (not x) and z)</span></span><br><span class="line"><span class="comment">    is equivalent to</span></span><br><span class="line"><span class="comment">      (((z xor y) and x) xor z)</span></span><br><span class="line"><span class="comment">    -HHellstrцm &#125;</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span> <span class="keyword">to</span> <span class="number">3</span> <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">begin</span></span><br><span class="line">    A := ROL((((D xor C) <span class="keyword">and</span> B) xor D) + A + buff[i*<span class="number">4</span>+<span class="number">0</span>],  <span class="number">3</span>);</span><br><span class="line">    D := ROL((((C xor B) <span class="keyword">and</span> A) xor C) + D + buff[i*<span class="number">4</span>+<span class="number">1</span>],  <span class="number">7</span>);</span><br><span class="line">    C := ROL((((B xor A) <span class="keyword">and</span> D) xor B) + C + buff[i*<span class="number">4</span>+<span class="number">2</span>], <span class="number">11</span>);</span><br><span class="line">    B := ROL((((A xor D) <span class="keyword">and</span> C) xor A) + B + buff[i*<span class="number">4</span>+<span class="number">3</span>], <span class="number">19</span>);</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line">  <span class="comment">// Round 2</span></span><br><span class="line">  <span class="comment">&#123; <span class="doctag">Note:</span></span></span><br><span class="line"><span class="comment">      (x and y) or (x and z) or (y and z)</span></span><br><span class="line"><span class="comment">    is equivalent to</span></span><br><span class="line"><span class="comment">      ((x and y) or (z and (x or y)))</span></span><br><span class="line"><span class="comment">    -HHellstrцm &#125;</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span> <span class="keyword">to</span> <span class="number">3</span> <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">begin</span></span><br><span class="line">    A := ROL(((B <span class="keyword">and</span> C) <span class="keyword">or</span> (D <span class="keyword">and</span> (B <span class="keyword">or</span> C))) + A + buff[<span class="number">0</span>*<span class="number">4</span>+i] + <span class="number">$5A827999</span>,  <span class="number">3</span>);</span><br><span class="line">    D := ROL(((A <span class="keyword">and</span> B) <span class="keyword">or</span> (C <span class="keyword">and</span> (A <span class="keyword">or</span> B))) + D + buff[<span class="number">1</span>*<span class="number">4</span>+i] + <span class="number">$5A827999</span>,  <span class="number">5</span>);</span><br><span class="line">    C := ROL(((D <span class="keyword">and</span> A) <span class="keyword">or</span> (B <span class="keyword">and</span> (D <span class="keyword">or</span> A))) + C + buff[<span class="number">2</span>*<span class="number">4</span>+i] + <span class="number">$5A827999</span>,  <span class="number">9</span>);</span><br><span class="line">    B := ROL(((C <span class="keyword">and</span> D) <span class="keyword">or</span> (A <span class="keyword">and</span> (C <span class="keyword">or</span> D))) + B + buff[<span class="number">3</span>*<span class="number">4</span>+i] + <span class="number">$5A827999</span>, <span class="number">13</span>);</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line">  <span class="comment">// Round 3</span></span><br><span class="line">  A := ROL((B xor C xor D) + A + buff[ <span class="number">0</span>] + <span class="number">$6ED9EBA1</span>,  <span class="number">3</span>);</span><br><span class="line">  D := ROL((A xor B xor C) + D + buff[ <span class="number">8</span>] + <span class="number">$6ED9EBA1</span>,  <span class="number">9</span>);</span><br><span class="line">  C := ROL((D xor A xor B) + C + buff[ <span class="number">4</span>] + <span class="number">$6ED9EBA1</span>, <span class="number">11</span>);</span><br><span class="line">  B := ROL((C xor D xor A) + B + buff[<span class="number">12</span>] + <span class="number">$6ED9EBA1</span>, <span class="number">15</span>);</span><br><span class="line">  A := ROL((B xor C xor D) + A + buff[ <span class="number">2</span>] + <span class="number">$6ED9EBA1</span>,  <span class="number">3</span>);</span><br><span class="line">  D := ROL((A xor B xor C) + D + buff[<span class="number">10</span>] + <span class="number">$6ED9EBA1</span>,  <span class="number">9</span>);</span><br><span class="line">  C := ROL((D xor A xor B) + C + buff[ <span class="number">6</span>] + <span class="number">$6ED9EBA1</span>, <span class="number">11</span>);</span><br><span class="line">  B := ROL((C xor D xor A) + B + buff[<span class="number">14</span>] + <span class="number">$6ED9EBA1</span>, <span class="number">15</span>);</span><br><span class="line">  A := ROL((B xor C xor D) + A + buff[ <span class="number">1</span>] + <span class="number">$6ED9EBA1</span>,  <span class="number">3</span>);</span><br><span class="line">  D := ROL((A xor B xor C) + D + buff[ <span class="number">9</span>] + <span class="number">$6ED9EBA1</span>,  <span class="number">9</span>);</span><br><span class="line">  C := ROL((D xor A xor B) + C + buff[ <span class="number">5</span>] + <span class="number">$6ED9EBA1</span>, <span class="number">11</span>);</span><br><span class="line">  B := ROL((C xor D xor A) + B + buff[<span class="number">13</span>] + <span class="number">$6ED9EBA1</span>, <span class="number">15</span>);</span><br><span class="line">  A := ROL((B xor C xor D) + A + buff[ <span class="number">3</span>] + <span class="number">$6ED9EBA1</span>,  <span class="number">3</span>);</span><br><span class="line">  D := ROL((A xor B xor C) + D + buff[<span class="number">11</span>] + <span class="number">$6ED9EBA1</span>,  <span class="number">9</span>);</span><br><span class="line">  C := ROL((D xor A xor B) + C + buff[ <span class="number">7</span>] + <span class="number">$6ED9EBA1</span>, <span class="number">11</span>);</span><br><span class="line">  B := ROL((C xor D xor A) + B + buff[<span class="number">15</span>] + <span class="number">$6ED9EBA1</span>, <span class="number">15</span>);</span><br><span class="line">  Inc(FState[<span class="number">0</span>], A);</span><br><span class="line">  Inc(FState[<span class="number">1</span>], B);</span><br><span class="line">  Inc(FState[<span class="number">2</span>], C);</span><br><span class="line">  Inc(FState[<span class="number">3</span>], D);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="meta">&#123;$Q+&#125;</span></span><br><span class="line"><span class="comment">&#123; TIdHashMessageDigest5Ex &#125;</span></span><br><span class="line"><span class="keyword">const</span></span><br><span class="line">  MD5_SINE : <span class="keyword">array</span>[<span class="number">1</span>..<span class="number">64</span>] <span class="keyword">of</span> LongWord = (</span><br><span class="line">   <span class="comment">&#123; Round 1. &#125;</span></span><br><span class="line">   <span class="number">$d76aa478</span>, <span class="number">$e8c7b756</span>, <span class="number">$242070db</span>, <span class="number">$c1bdceee</span>, <span class="number">$f57c0faf</span>, <span class="number">$4787c62a</span>,</span><br><span class="line">   <span class="number">$a8304613</span>, <span class="number">$fd469501</span>, <span class="number">$698098d8</span>, <span class="number">$8b44f7af</span>, <span class="number">$ffff5bb1</span>, <span class="number">$895cd7be</span>,</span><br><span class="line">   <span class="number">$6b901122</span>, <span class="number">$fd987193</span>, <span class="number">$a679438e</span>, <span class="number">$49b40821</span>,</span><br><span class="line">   <span class="comment">&#123; Round 2. &#125;</span></span><br><span class="line">   <span class="number">$f61e2562</span>, <span class="number">$c040b340</span>, <span class="number">$265e5a51</span>, <span class="number">$e9b6c7aa</span>, <span class="number">$d62f105d</span>, <span class="number">$02441453</span>,</span><br><span class="line">   <span class="number">$d8a1e681</span>, <span class="number">$e7d3fbc8</span>, <span class="number">$21e1cde6</span>, <span class="number">$c33707d6</span>, <span class="number">$f4d50d87</span>, <span class="number">$455a14ed</span>,</span><br><span class="line">   <span class="number">$a9e3e905</span>, <span class="number">$fcefa3f8</span>, <span class="number">$676f02d9</span>, <span class="number">$8d2a4c8a</span>,</span><br><span class="line">   <span class="comment">&#123; Round 3. &#125;</span></span><br><span class="line">   <span class="number">$fffa3942</span>, <span class="number">$8771f681</span>, <span class="number">$6d9d6122</span>, <span class="number">$fde5380c</span>, <span class="number">$a4beea44</span>, <span class="number">$4bdecfa9</span>,</span><br><span class="line">   <span class="number">$f6bb4b60</span>, <span class="number">$bebfbc70</span>, <span class="number">$289b7ec6</span>, <span class="number">$eaa127fa</span>, <span class="number">$d4ef3085</span>, <span class="number">$04881d05</span>,</span><br><span class="line">   <span class="number">$d9d4d039</span>, <span class="number">$e6db99e5</span>, <span class="number">$1fa27cf8</span>, <span class="number">$c4ac5665</span>,</span><br><span class="line">   <span class="comment">&#123; Round 4. &#125;</span></span><br><span class="line">   <span class="number">$f4292244</span>, <span class="number">$432aff97</span>, <span class="number">$ab9423a7</span>, <span class="number">$fc93a039</span>, <span class="number">$655b59c3</span>, <span class="number">$8f0ccc92</span>,</span><br><span class="line">   <span class="number">$ffeff47d</span>, <span class="number">$85845dd1</span>, <span class="number">$6fa87e4f</span>, <span class="number">$fe2ce6e0</span>, <span class="number">$a3014314</span>, <span class="number">$4e0811a1</span>,</span><br><span class="line">   <span class="number">$f7537e82</span>, <span class="number">$bd3af235</span>, <span class="number">$2ad7d2bb</span>, <span class="number">$eb86d391</span></span><br><span class="line">  );</span><br><span class="line"><span class="meta">&#123;$Q-&#125;</span> <span class="comment">// Arithmetic operations performed modulo $100000000</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TIdHashMessageDigest5Ex</span>.<span class="title">InitHash</span>:</span> TIdHashIntCtx;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  Result := GetMD5HashInst;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="function"><span class="keyword">function</span> <span class="title">TIdHashMessageDigest5Ex</span>.<span class="title">IsIntfAvailable</span>:</span> Boolean;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  Result := IsHashingIntfAvail <span class="keyword">and</span> IsMD5HashIntfAvail ;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">TIdHashMessageDigest5Ex</span>.<span class="title">MDCoder</span>;</span></span><br><span class="line"><span class="keyword">var</span></span><br><span class="line">  A, B, C, D : LongWord;</span><br><span class="line">  i: Integer;</span><br><span class="line">  x : T16x4LongWordRecord; <span class="comment">// 64-byte buffer</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  A := FState[<span class="number">0</span>];</span><br><span class="line">  B := FState[<span class="number">1</span>];</span><br><span class="line">  C := FState[<span class="number">2</span>];</span><br><span class="line">  D := FState[<span class="number">3</span>];</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span> <span class="keyword">to</span> <span class="number">15</span> <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">begin</span></span><br><span class="line">    x[i] := FCBuffer[i*<span class="number">4</span>+<span class="number">0</span>] +</span><br><span class="line">            (FCBuffer[i*<span class="number">4</span>+<span class="number">1</span>] <span class="keyword">shl</span> <span class="number">8</span>) +</span><br><span class="line">            (FCBuffer[i*<span class="number">4</span>+<span class="number">2</span>] <span class="keyword">shl</span> <span class="number">16</span>) +</span><br><span class="line">            (FCBuffer[i*<span class="number">4</span>+<span class="number">3</span>] <span class="keyword">shl</span> <span class="number">24</span>);</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line">  <span class="comment">&#123; Round 1 &#125;</span></span><br><span class="line">  <span class="comment">&#123; <span class="doctag">Note:</span></span></span><br><span class="line"><span class="comment">      (x and y) or ( (not x) and z)</span></span><br><span class="line"><span class="comment">    is equivalent to</span></span><br><span class="line"><span class="comment">      (((z xor y) and x) xor z)</span></span><br><span class="line"><span class="comment">    -HHellstrцm &#125;</span></span><br><span class="line">  A := ROL(A + (((D xor C) <span class="keyword">and</span> B) xor D) + x[ <span class="number">0</span>] + MD5_SINE[ <span class="number">1</span>],  <span class="number">7</span>) + B;</span><br><span class="line">  D := ROL(D + (((C xor B) <span class="keyword">and</span> A) xor C) + x[ <span class="number">1</span>] + MD5_SINE[ <span class="number">2</span>], <span class="number">12</span>) + A;</span><br><span class="line">  C := ROL(C + (((B xor A) <span class="keyword">and</span> D) xor B) + x[ <span class="number">2</span>] + MD5_SINE[ <span class="number">3</span>], <span class="number">17</span>) + D;</span><br><span class="line">  B := ROL(B + (((A xor D) <span class="keyword">and</span> C) xor A) + x[ <span class="number">3</span>] + MD5_SINE[ <span class="number">4</span>], <span class="number">22</span>) + C;</span><br><span class="line">  A := ROL(A + (((D xor C) <span class="keyword">and</span> B) xor D) + x[ <span class="number">4</span>] + MD5_SINE[ <span class="number">5</span>],  <span class="number">7</span>) + B;</span><br><span class="line">  D := ROL(D + (((C xor B) <span class="keyword">and</span> A) xor C) + x[ <span class="number">5</span>] + MD5_SINE[ <span class="number">6</span>], <span class="number">12</span>) + A;</span><br><span class="line">  C := ROL(C + (((B xor A) <span class="keyword">and</span> D) xor B) + x[ <span class="number">6</span>] + MD5_SINE[ <span class="number">7</span>], <span class="number">17</span>) + D;</span><br><span class="line">  B := ROL(B + (((A xor D) <span class="keyword">and</span> C) xor A) + x[ <span class="number">7</span>] + MD5_SINE[ <span class="number">8</span>], <span class="number">22</span>) + C;</span><br><span class="line">  A := ROL(A + (((D xor C) <span class="keyword">and</span> B) xor D) + x[ <span class="number">8</span>] + MD5_SINE[ <span class="number">9</span>],  <span class="number">7</span>) + B;</span><br><span class="line">  D := ROL(D + (((C xor B) <span class="keyword">and</span> A) xor C) + x[ <span class="number">9</span>] + MD5_SINE[<span class="number">10</span>], <span class="number">12</span>) + A;</span><br><span class="line">  C := ROL(C + (((B xor A) <span class="keyword">and</span> D) xor B) + x[<span class="number">10</span>] + MD5_SINE[<span class="number">11</span>], <span class="number">17</span>) + D;</span><br><span class="line">  B := ROL(B + (((A xor D) <span class="keyword">and</span> C) xor A) + x[<span class="number">11</span>] + MD5_SINE[<span class="number">12</span>], <span class="number">22</span>) + C;</span><br><span class="line">  A := ROL(A + (((D xor C) <span class="keyword">and</span> B) xor D) + x[<span class="number">12</span>] + MD5_SINE[<span class="number">13</span>],  <span class="number">7</span>) + B;</span><br><span class="line">  D := ROL(D + (((C xor B) <span class="keyword">and</span> A) xor C) + x[<span class="number">13</span>] + MD5_SINE[<span class="number">14</span>], <span class="number">12</span>) + A;</span><br><span class="line">  C := ROL(C + (((B xor A) <span class="keyword">and</span> D) xor B) + x[<span class="number">14</span>] + MD5_SINE[<span class="number">15</span>], <span class="number">17</span>) + D;</span><br><span class="line">  B := ROL(B + (((A xor D) <span class="keyword">and</span> C) xor A) + x[<span class="number">15</span>] + MD5_SINE[<span class="number">16</span>], <span class="number">22</span>) + C;</span><br><span class="line">  <span class="comment">&#123; Round 2 &#125;</span></span><br><span class="line">  <span class="comment">&#123; <span class="doctag">Note:</span></span></span><br><span class="line"><span class="comment">      (x and z) or (y and (not z) )</span></span><br><span class="line"><span class="comment">    is equivalent to</span></span><br><span class="line"><span class="comment">      (((y xor x) and z) xor y)</span></span><br><span class="line"><span class="comment">    -HHellstrцm &#125;</span></span><br><span class="line">  A := ROL(A + (C xor (D <span class="keyword">and</span> (B xor C))) + x[ <span class="number">1</span>] + MD5_SINE[<span class="number">17</span>],  <span class="number">5</span>) + B;</span><br><span class="line">  D := ROL(D + (B xor (C <span class="keyword">and</span> (A xor B))) + x[ <span class="number">6</span>] + MD5_SINE[<span class="number">18</span>],  <span class="number">9</span>) + A;</span><br><span class="line">  C := ROL(C + (A xor (B <span class="keyword">and</span> (D xor A))) + x[<span class="number">11</span>] + MD5_SINE[<span class="number">19</span>], <span class="number">14</span>) + D;</span><br><span class="line">  B := ROL(B + (D xor (A <span class="keyword">and</span> (C xor D))) + x[ <span class="number">0</span>] + MD5_SINE[<span class="number">20</span>], <span class="number">20</span>) + C;</span><br><span class="line">  A := ROL(A + (C xor (D <span class="keyword">and</span> (B xor C))) + x[ <span class="number">5</span>] + MD5_SINE[<span class="number">21</span>],  <span class="number">5</span>) + B;</span><br><span class="line">  D := ROL(D + (B xor (C <span class="keyword">and</span> (A xor B))) + x[<span class="number">10</span>] + MD5_SINE[<span class="number">22</span>],  <span class="number">9</span>) + A;</span><br><span class="line">  C := ROL(C + (A xor (B <span class="keyword">and</span> (D xor A))) + x[<span class="number">15</span>] + MD5_SINE[<span class="number">23</span>], <span class="number">14</span>) + D;</span><br><span class="line">  B := ROL(B + (D xor (A <span class="keyword">and</span> (C xor D))) + x[ <span class="number">4</span>] + MD5_SINE[<span class="number">24</span>], <span class="number">20</span>) + C;</span><br><span class="line">  A := ROL(A + (C xor (D <span class="keyword">and</span> (B xor C))) + x[ <span class="number">9</span>] + MD5_SINE[<span class="number">25</span>],  <span class="number">5</span>) + B;</span><br><span class="line">  D := ROL(D + (B xor (C <span class="keyword">and</span> (A xor B))) + x[<span class="number">14</span>] + MD5_SINE[<span class="number">26</span>],  <span class="number">9</span>) + A;</span><br><span class="line">  C := ROL(C + (A xor (B <span class="keyword">and</span> (D xor A))) + x[ <span class="number">3</span>] + MD5_SINE[<span class="number">27</span>], <span class="number">14</span>) + D;</span><br><span class="line">  B := ROL(B + (D xor (A <span class="keyword">and</span> (C xor D))) + x[ <span class="number">8</span>] + MD5_SINE[<span class="number">28</span>], <span class="number">20</span>) + C;</span><br><span class="line">  A := ROL(A + (C xor (D <span class="keyword">and</span> (B xor C))) + x[<span class="number">13</span>] + MD5_SINE[<span class="number">29</span>],  <span class="number">5</span>) + B;</span><br><span class="line">  D := ROL(D + (B xor (C <span class="keyword">and</span> (A xor B))) + x[ <span class="number">2</span>] + MD5_SINE[<span class="number">30</span>],  <span class="number">9</span>) + A;</span><br><span class="line">  C := ROL(C + (A xor (B <span class="keyword">and</span> (D xor A))) + x[ <span class="number">7</span>] + MD5_SINE[<span class="number">31</span>], <span class="number">14</span>) + D;</span><br><span class="line">  B := ROL(B + (D xor (A <span class="keyword">and</span> (C xor D))) + x[<span class="number">12</span>] + MD5_SINE[<span class="number">32</span>], <span class="number">20</span>) + C;</span><br><span class="line">  <span class="comment">&#123; Round 3. &#125;</span></span><br><span class="line">  A := ROL(A + (B xor C xor D) + x[ <span class="number">5</span>] + MD5_SINE[<span class="number">33</span>],  <span class="number">4</span>) + B;</span><br><span class="line">  D := ROL(D + (A xor B xor C) + x[ <span class="number">8</span>] + MD5_SINE[<span class="number">34</span>], <span class="number">11</span>) + A;</span><br><span class="line">  C := ROL(C + (D xor A xor B) + x[<span class="number">11</span>] + MD5_SINE[<span class="number">35</span>], <span class="number">16</span>) + D;</span><br><span class="line">  B := ROL(B + (C xor D xor A) + x[<span class="number">14</span>] + MD5_SINE[<span class="number">36</span>], <span class="number">23</span>) + C;</span><br><span class="line">  A := ROL(A + (B xor C xor D) + x[ <span class="number">1</span>] + MD5_SINE[<span class="number">37</span>],  <span class="number">4</span>) + B;</span><br><span class="line">  D := ROL(D + (A xor B xor C) + x[ <span class="number">4</span>] + MD5_SINE[<span class="number">38</span>], <span class="number">11</span>) + A;</span><br><span class="line">  C := ROL(C + (D xor A xor B) + x[ <span class="number">7</span>] + MD5_SINE[<span class="number">39</span>], <span class="number">16</span>) + D;</span><br><span class="line">  B := ROL(B + (C xor D xor A) + x[<span class="number">10</span>] + MD5_SINE[<span class="number">40</span>], <span class="number">23</span>) + C;</span><br><span class="line">  A := ROL(A + (B xor C xor D) + x[<span class="number">13</span>] + MD5_SINE[<span class="number">41</span>],  <span class="number">4</span>) + B;</span><br><span class="line">  D := ROL(D + (A xor B xor C) + x[ <span class="number">0</span>] + MD5_SINE[<span class="number">42</span>], <span class="number">11</span>) + A;</span><br><span class="line">  C := ROL(C + (D xor A xor B) + x[ <span class="number">3</span>] + MD5_SINE[<span class="number">43</span>], <span class="number">16</span>) + D;</span><br><span class="line">  B := ROL(B + (C xor D xor A) + x[ <span class="number">6</span>] + MD5_SINE[<span class="number">44</span>], <span class="number">23</span>) + C;</span><br><span class="line">  A := ROL(A + (B xor C xor D) + x[ <span class="number">9</span>] + MD5_SINE[<span class="number">45</span>],  <span class="number">4</span>) + B;</span><br><span class="line">  D := ROL(D + (A xor B xor C) + x[<span class="number">12</span>] + MD5_SINE[<span class="number">46</span>], <span class="number">11</span>) + A;</span><br><span class="line">  C := ROL(C + (D xor A xor B) + x[<span class="number">15</span>] + MD5_SINE[<span class="number">47</span>], <span class="number">16</span>) + D;</span><br><span class="line">  B := ROL(B + (C xor D xor A) + x[ <span class="number">2</span>] + MD5_SINE[<span class="number">48</span>], <span class="number">23</span>) + C;</span><br><span class="line">  <span class="comment">&#123; Round 4. &#125;</span></span><br><span class="line">  A := ROL(A + ((B <span class="keyword">or</span> <span class="keyword">not</span> D) xor C) + x[ <span class="number">0</span>] + MD5_SINE[<span class="number">49</span>],  <span class="number">6</span>) + B;</span><br><span class="line">  D := ROL(D + ((A <span class="keyword">or</span> <span class="keyword">not</span> C) xor B) + x[ <span class="number">7</span>] + MD5_SINE[<span class="number">50</span>], <span class="number">10</span>) + A;</span><br><span class="line">  C := ROL(C + ((D <span class="keyword">or</span> <span class="keyword">not</span> B) xor A) + x[<span class="number">14</span>] + MD5_SINE[<span class="number">51</span>], <span class="number">15</span>) + D;</span><br><span class="line">  B := ROL(B + ((C <span class="keyword">or</span> <span class="keyword">not</span> A) xor D) + x[ <span class="number">5</span>] + MD5_SINE[<span class="number">52</span>], <span class="number">21</span>) + C;</span><br><span class="line">  A := ROL(A + ((B <span class="keyword">or</span> <span class="keyword">not</span> D) xor C) + x[<span class="number">12</span>] + MD5_SINE[<span class="number">53</span>],  <span class="number">6</span>) + B;</span><br><span class="line">  D := ROL(D + ((A <span class="keyword">or</span> <span class="keyword">not</span> C) xor B) + x[ <span class="number">3</span>] + MD5_SINE[<span class="number">54</span>], <span class="number">10</span>) + A;</span><br><span class="line">  C := ROL(C + ((D <span class="keyword">or</span> <span class="keyword">not</span> B) xor A) + x[<span class="number">10</span>] + MD5_SINE[<span class="number">55</span>], <span class="number">15</span>) + D;</span><br><span class="line">  B := ROL(B + ((C <span class="keyword">or</span> <span class="keyword">not</span> A) xor D) + x[ <span class="number">1</span>] + MD5_SINE[<span class="number">56</span>], <span class="number">21</span>) + C;</span><br><span class="line">  A := ROL(A + ((B <span class="keyword">or</span> <span class="keyword">not</span> D) xor C) + x[ <span class="number">8</span>] + MD5_SINE[<span class="number">57</span>],  <span class="number">6</span>) + B;</span><br><span class="line">  D := ROL(D + ((A <span class="keyword">or</span> <span class="keyword">not</span> C) xor B) + x[<span class="number">15</span>] + MD5_SINE[<span class="number">58</span>], <span class="number">10</span>) + A;</span><br><span class="line">  C := ROL(C + ((D <span class="keyword">or</span> <span class="keyword">not</span> B) xor A) + x[ <span class="number">6</span>] + MD5_SINE[<span class="number">59</span>], <span class="number">15</span>) + D;</span><br><span class="line">  B := ROL(B + ((C <span class="keyword">or</span> <span class="keyword">not</span> A) xor D) + x[<span class="number">13</span>] + MD5_SINE[<span class="number">60</span>], <span class="number">21</span>) + C;</span><br><span class="line">  A := ROL(A + ((B <span class="keyword">or</span> <span class="keyword">not</span> D) xor C) + x[ <span class="number">4</span>] + MD5_SINE[<span class="number">61</span>],  <span class="number">6</span>) + B;</span><br><span class="line">  D := ROL(D + ((A <span class="keyword">or</span> <span class="keyword">not</span> C) xor B) + x[<span class="number">11</span>] + MD5_SINE[<span class="number">62</span>], <span class="number">10</span>) + A;</span><br><span class="line">  C := ROL(C + ((D <span class="keyword">or</span> <span class="keyword">not</span> B) xor A) + x[ <span class="number">2</span>] + MD5_SINE[<span class="number">63</span>], <span class="number">15</span>) + D;</span><br><span class="line">  B := ROL(B + ((C <span class="keyword">or</span> <span class="keyword">not</span> A) xor D) + x[ <span class="number">9</span>] + MD5_SINE[<span class="number">64</span>], <span class="number">21</span>) + C;</span><br><span class="line">  Inc(FState[<span class="number">0</span>], A);</span><br><span class="line">  Inc(FState[<span class="number">1</span>], B);</span><br><span class="line">  Inc(FState[<span class="number">2</span>], C);</span><br><span class="line">  Inc(FState[<span class="number">3</span>], D);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="meta">&#123;$Q+&#125;</span></span><br><span class="line"><span class="meta">&#123;$ENDIF&#125;</span></span><br><span class="line"><span class="keyword">end</span>.</span><br></pre></td></tr></table></figure>

<p>=&#x3D;&#x3D;</p>
<p>Перепечатка материалов блога разрешается с обязательной ссылкой на <a href="http://blog.coolsoftware.ru/">blog.coolsoftware.ru</a></p>

      
    </div>
    <footer>
      
        
        
      
      
      
  
  <div class="tags">
    <a href="/tags/64/">64</a>, <a href="/tags/delphi/">delphi</a>, <a href="/tags/bug/">bug</a>, <a href="/tags/md4/">MD4</a>, <a href="/tags/md5/">MD5</a>, <a href="/tags/xe2/">XE2</a>
  </div>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article id="post-ahci" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2017-06-02T08:50:00.000Z"><a href="/2017/06/ahci/">2017-06-02</a></time>
      
      
  
    <h1 class="title"><a href="/2017/06/ahci/">AHCI</a></h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://ru.wikipedia.org/wiki/Advanced_Host_Controller_Interface">Wiki</a>: “Advanced Host Controller Interface (AHCI) — механизм, используемый для подключения накопителей информации по протоколу Serial ATA, позволяющий пользоваться расширенными функциями, такими, как встроенная очерёдность команд (NCQ) и горячая замена.”  </p>
<p>Как включить:  </p>
<p><strong>Windows 7</strong>  </p>
<p>1. В реестре в разделе HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\msachi установить значение параметра “Start” (REG_DWORD) равным 0 (по-умолчанию Start&#x3D;3).  </p>
<p>2. В реестре в разделе HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\iaStorV установить значение параметра “Start” (REG_DWORD) равным 0 (по-умолчанию Start&#x3D;3).  </p>
<p>3. В BIOS включить режим AHCI вместо IDE.  </p>
<p><strong>Windows 10</strong>  </p>
<p>1. В реестре в разделе HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\iaStorV установить значение параметра “Start” (REG_DWORD) равным 0.  </p>
<p>2. В реестре в разделе HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\iaStorAV\StartOverride установить значение параметра “0” равным 0 (по-умолчанию значение этого параметра равно 3).  </p>
<p>3. В реестре в разделе HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\storachi\StartOverride установить значение параметра “0” равным 0 (по-умолчанию значение этого параметра равно 3).  </p>
<p>4. В BIOS включить режим AHCI вместо IDE.  </p>
<p><strong>CentOS 7</strong>  </p>
<p>1. Выполнить:  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo modprobe ahci</span><br><span class="line">sudo <span class="built_in">cp</span> /boot/initramfs-`<span class="built_in">uname</span> -r`.img /boot/initramfs-`<span class="built_in">uname</span> -r`.img.bak</span><br><span class="line">sudo mkinitrd -f --with=ahci /boot/initramfs-`<span class="built_in">uname</span> -r`.img `<span class="built_in">uname</span> -r`</span><br></pre></td></tr></table></figure>

<p>2. В BIOS включить режим AHCI вместо IDE.  </p>
<p>=&#x3D;&#x3D;<br>Перепечатка материалов блога разрешается с обязательной ссылкой на <a href="http://blog.coolsoftware.ru/">blog.coolsoftware.ru</a></p>

      
    </div>
    <footer>
      
        
        
      
      
      
  
  <div class="tags">
    <a href="/tags/windows/">windows</a>, <a href="/tags/ahci/">AHCI</a>, <a href="/tags/centos/">CentOS</a>
  </div>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article id="post-minidlna-refresh-files-and-folders" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2016-09-01T09:23:00.000Z"><a href="/2016/09/minidlna-refresh-files-and-folders/">2016-09-01</a></time>
      
      
  
    <h1 class="title"><a href="/2016/09/minidlna-refresh-files-and-folders/">MiniDLNA: refresh files and folders structure</a></h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <p>Как обновить структуру файлов и каталогов в MiniDLNA:  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo service minidlna stop</span><br><span class="line">sudo <span class="built_in">rm</span> -rf /var/cache/minidlna/files.db</span><br><span class="line">sudo service minidlna restart</span><br></pre></td></tr></table></figure>

<p>UPD.  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo /etc/init.d/minidlna restart</span><br><span class="line">sudo /etc/init.d/minidlna force-reload</span><br></pre></td></tr></table></figure>

<p>UPD2  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo minidlnad -R</span><br><span class="line">sudo service minidlna restart</span><br></pre></td></tr></table></figure>

<p>=&#x3D;&#x3D;<br>Перепечатка материалов блога разрешается с обязательной ссылкой на <a href="http://blog.coolsoftware.ru/">blog.coolsoftware.ru</a></p>

      
    </div>
    <footer>
      
        
        
      
      
      
  
  <div class="tags">
    <a href="/tags/howto/">howto</a>, <a href="/tags/raspberry-pi/">Raspberry Pi</a>, <a href="/tags/minidlna/">MiniDLNA</a>
  </div>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article id="post-delphi-xe2-indy-parse-cookie-bug" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2016-08-22T07:27:00.000Z"><a href="/2016/08/delphi-xe2-indy-parse-cookie-bug/">2016-08-22</a></time>
      
      
  
    <h1 class="title"><a href="/2016/08/delphi-xe2-indy-parse-cookie-bug/">[Delphi XE2] Indy Parse Cookie Bug</a></h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <p>В Delphi XE2 отыскался баг в <strong>TIdCookie.ParseServerCookie</strong>. Смотрим код:  </p>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetLastValueOf</span><span class="params">(<span class="keyword">const</span> AName: <span class="keyword">String</span>; <span class="keyword">var</span> VValue: <span class="keyword">String</span>)</span>:</span> Boolean;</span><br><span class="line">  <span class="keyword">var</span></span><br><span class="line">    I: Integer;</span><br><span class="line">  <span class="keyword">begin</span></span><br><span class="line">    Result := False;</span><br><span class="line">    <span class="keyword">for</span> I := CookieProp.Count-<span class="number">1</span> <span class="keyword">downto</span> <span class="number">0</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">      <span class="keyword">if</span> TextIsSame(CookieProp.Names[I], AName) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">begin</span></span><br><span class="line">        <span class="meta">&#123;$IFDEF HAS_TStrings_ValueFromIndex&#125;</span></span><br><span class="line">        VValue := CookieProp.ValueFromIndex[I];</span><br><span class="line">        <span class="meta">&#123;$ELSE&#125;</span></span><br><span class="line">        VValue := Copy(CookieProp[I], Pos(<span class="string">&#x27;=&#x27;</span>, CookieProp[I])+<span class="number">1</span>, MaxInt); <span class="comment">&#123;Do not Localize&#125;</span></span><br><span class="line">        <span class="meta">&#123;$ENDIF&#125;</span></span><br><span class="line">        Result := True;</span><br><span class="line">        <span class="keyword">Exit</span>;</span><br><span class="line">      <span class="keyword">end</span>;</span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line">...</span><br><span class="line">    <span class="keyword">if</span> GetLastValueOf(<span class="string">&#x27;MAX-AGE&#x27;</span>, S) <span class="keyword">then</span> <span class="keyword">begin</span> <span class="comment">&#123;Do not Localize&#125;</span></span><br><span class="line">      FPersistent := True;</span><br><span class="line">      FExpires := StrToFloat(S);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> GetLastValueOf(<span class="string">&#x27;EXPIRES&#x27;</span>, S) <span class="keyword">then</span> <span class="comment">&#123;Do not Localize&#125;</span></span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">      FPersistent := True;</span><br><span class="line">      FExpires := StrToFloat(S);</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">      FPersistent := False;</span><br><span class="line">      FExpires := EncodeDate(<span class="number">9999</span>, <span class="number">12</span>, <span class="number">31</span>) + EncodeTime(<span class="number">23</span>, <span class="number">59</span>, <span class="number">59</span>, <span class="number">999</span>);</span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line">    <span class="keyword">if</span> GetLastValueOf(<span class="string">&#x27;DOMAIN&#x27;</span>, S) <span class="keyword">then</span> <span class="comment">&#123;Do not Localize&#125;</span></span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">             </span><br><span class="line">      <span class="comment">&#123;</span></span><br><span class="line"><span class="comment">        If the user agent is configured to reject &quot;public suffixes&quot; and</span></span><br><span class="line"><span class="comment">        the domain-attribute is a public suffix:</span></span><br><span class="line"><span class="comment">           If the domain-attribute is identical to the canonicalized</span></span><br><span class="line"><span class="comment">           request-host:</span></span><br><span class="line"><span class="comment">              Let the domain-attribute be the empty string.</span></span><br><span class="line"><span class="comment">           Otherwise:</span></span><br><span class="line"><span class="comment">              Ignore the cookie entirely and abort these steps.</span></span><br><span class="line"><span class="comment">           <span class="doctag">NOTE:</span> A &quot;public suffix&quot; is a domain that is controlled by a</span></span><br><span class="line"><span class="comment">           public registry, such as &quot;com&quot;, &quot;co.uk&quot;, and &quot;pvt.k12.wy.us&quot;.</span></span><br><span class="line"><span class="comment">           This step is essential for preventing attacker.com from</span></span><br><span class="line"><span class="comment">           disrupting the integrity of example.com by setting a cookie</span></span><br><span class="line"><span class="comment">           with a Domain attribute of &quot;com&quot;.  Unfortunately, the set of</span></span><br><span class="line"><span class="comment">           public suffixes (also known as &quot;registry controlled domains&quot;)</span></span><br><span class="line"><span class="comment">           changes over time.  If feasible, user agents SHOULD use an</span></span><br><span class="line"><span class="comment">           up-to-date public suffix list, such as the one maintained by</span></span><br><span class="line"><span class="comment">           the Mozilla project at .</span></span><br><span class="line"><span class="comment">      &#125;</span></span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line">    <span class="keyword">if</span> Length(S) &gt; <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> IsDomainMatch(AURI.Host, S) <span class="keyword">then</span> <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">Exit</span>;</span><br><span class="line">      <span class="keyword">end</span>;</span><br><span class="line">      FHostOnly := False;</span><br><span class="line">      FDomain := S;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">      FHostOnly := True;</span><br><span class="line">      FDomain := CanonicalizeHostName(AURI.Host);</span><br><span class="line">    <span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<p>Ошибка происходит если строка <strong>S</strong> после вызова <strong>GetLastValueOf(‘EXPIRES’, S)</strong> содержит что-нибудь (<strong>Length(S) &gt; 0</strong>), а GetLastValueOf(‘DOMAIN’, <strong>S)</strong> возвращает <strong>False</strong>.  </p>
<p>Такое случается, если на вход <strong>TIdCookie.ParseServerCookie</strong> поступает строка <strong>ACookieText</strong> типа такой:  </p>
<p>CookieName&#x3D;CookieValue;Path&#x3D;&#x2F;;Expires&#x3D;Wed, 20-Aug-2017 02:20:00 GMT;  </p>
<p>Интересно, что ошибки бы не случилось, если бы параметр <strong>VValue</strong> у функции <strong>GetLastValueOf</strong> был объявлен как <strong>out</strong>, а не как <strong>var</strong>.  </p>
<p><strong>Fix</strong>. Для исправления этого бага я сделал класс <strong>TVCookieManager</strong>, который служит заменой для <strong>TIdCookieManager</strong>. Взять можно тут: <a target="_blank" rel="noopener" href="https://github.com/coolsoftware/VCookieManager">https://github.com/coolsoftware/VCookieManager</a>.<br>Использовать так:  </p>
<figure class="highlight pascal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span></span><br><span class="line">  FixedCookieManager: TVCookieManager;</span><br><span class="line">  IdHTTP: TIdHTTP;</span><br><span class="line">  </span><br><span class="line">  ...</span><br><span class="line">  </span><br><span class="line">  FixedCookieManager := TVCookieManager.Create;</span><br><span class="line">  IdHTTP := TIdHTTP.Create;</span><br><span class="line">  IdHTTP.CookieManager := FixedCookieManager;</span><br></pre></td></tr></table></figure>

<p>=&#x3D;&#x3D;<br>Перепечатка материалов блога разрешается с обязательной ссылкой на <a href="http://blog.coolsoftware.ru/">blog.coolsoftware.ru</a></p>

      
    </div>
    <footer>
      
        
        
      
      
      
  
  <div class="tags">
    <a href="/tags/delphi/">delphi</a>, <a href="/tags/bug/">bug</a>, <a href="/tags/xe2/">XE2</a>, <a href="/tags/cookie/">Cookie</a>, <a href="/tags/parseservercookie/">ParseServerCookie</a>, <a href="/tags/%D0%B1%D0%B0%D0%B3/">баг</a>
  </div>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
    <a href="/page/5/" class="alignleft prev">Назад</a>
  
  
    <a href="/page/7/" class="alignright next">Вперед</a>
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  

<div class="widget tag">
    <h3 class="title">Контакты</h3>
    <div class="entry">
        
<div class="contactlink githublink">
    <div class="icon"></div>
    <a target="_blank" rel="noopener" href="https://github.com/coolsoftware/">github.com/coolsoftware</a>
</div>

    </div>
</div>


  

<div class="widget tag">
    <h3 class="title">Избранные сообщения</h3>
    <div class="entry">
        
<div>
    <a href="/tags/%D0%BF%D0%BE%D0%BB%D0%B5%D0%B7%D0%BD%D1%8B%D0%B5-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8/">Полезные ссылки</a>
</div>

<div>
    <a href="/tags/howto/">Howto</a>
</div>

<div>
    <a href="/2021/01/blog-post/">Музыка</a>
</div>

<div>
    <a href="/tags/trie/">Поиск подстрок с помощью дерева цифрового поиска</a>
</div>

<div>
    <a href="/tags/%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE-%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%B2%D0%B0%D0%BB%D0%BE%D0%B2/">Дерево Интервалов (Отрезков)</a>
</div>

<div>
    <a href="/tags/throttling/">Throttling</a>
</div>

<div>
    <a href="/2022/01/nodejs/">В одну строку</a>
</div>

<div>
    <a href="/tags/%D0%B0%D0%BD%D0%B5%D0%BA%D0%B4%D0%BE%D1%82%D1%8B/">Анекдоты</a>
</div>

    </div>
</div>


  

  
<div class="widget tagcloud">
  <h3 class="title">Облако меток</h3>
  <div class="entry">
    <a href="/tags/net/" style="font-size: 11.11px;">.NET</a> <a href="/tags/0xe06d7363/" style="font-size: 10px;">0xe06d7363</a> <a href="/tags/32/" style="font-size: 10px;">32</a> <a href="/tags/404/" style="font-size: 10px;">404</a> <a href="/tags/64/" style="font-size: 11.11px;">64</a> <a href="/tags/ahci/" style="font-size: 10px;">AHCI</a> <a href="/tags/asp/" style="font-size: 11.11px;">ASP</a> <a href="/tags/asprotect/" style="font-size: 11.11px;">ASProtect</a> <a href="/tags/asus/" style="font-size: 10px;">ASUS</a> <a href="/tags/access-violation/" style="font-size: 10px;">Access Violation</a> <a href="/tags/active-server-pages/" style="font-size: 10px;">Active Server Pages</a> <a href="/tags/amazon/" style="font-size: 10px;">Amazon</a> <a href="/tags/angular/" style="font-size: 10px;">Angular</a> <a href="/tags/apache/" style="font-size: 11.11px;">Apache</a> <a href="/tags/bootstrap/" style="font-size: 10px;">Bootstrap</a> <a href="/tags/bouncy-castle/" style="font-size: 10px;">Bouncy Castle</a> <a href="/tags/c/" style="font-size: 12.22px;">C#</a> <a href="/tags/com/" style="font-size: 10px;">COM</a> <a href="/tags/centos/" style="font-size: 15.56px;">CentOS</a> <a href="/tags/cookie/" style="font-size: 10px;">Cookie</a> <a href="/tags/createprocess/" style="font-size: 10px;">CreateProcess</a> <a href="/tags/dst/" style="font-size: 10px;">DST</a> <a href="/tags/designer/" style="font-size: 10px;">Designer</a> <a href="/tags/desktop/" style="font-size: 10px;">Desktop</a> <a href="/tags/driver/" style="font-size: 10px;">Driver</a> <a href="/tags/ec2/" style="font-size: 10px;">EC2</a> <a href="/tags/eosio/" style="font-size: 10px;">EOSIO</a> <a href="/tags/enhanced-security/" style="font-size: 10px;">Enhanced Security</a> <a href="/tags/git/" style="font-size: 10px;">Git.</a> <a href="/tags/iis/" style="font-size: 11.11px;">IIS</a> <a href="/tags/insert/" style="font-size: 10px;">INSERT</a> <a href="/tags/icons/" style="font-size: 11.11px;">Icons</a> <a href="/tags/interval-tree/" style="font-size: 10px;">Interval Tree</a> <a href="/tags/java/" style="font-size: 10px;">Java</a> <a href="/tags/lazarus/" style="font-size: 10px;">Lazarus</a> <a href="/tags/linux/" style="font-size: 13.33px;">Linux</a> <a href="/tags/locklib/" style="font-size: 11.11px;">LockLib</a> <a href="/tags/md4/" style="font-size: 10px;">MD4</a> <a href="/tags/md5/" style="font-size: 10px;">MD5</a> <a href="/tags/mdb-access/" style="font-size: 10px;">MDB Access</a> <a href="/tags/mac/" style="font-size: 10px;">Mac</a> <a href="/tags/microsoft/" style="font-size: 10px;">Microsoft</a> <a href="/tags/mikrotik/" style="font-size: 10px;">MikroTik</a> <a href="/tags/minidlna/" style="font-size: 11.11px;">MiniDLNA</a> <a href="/tags/netbeans/" style="font-size: 10px;">NetBeans</a> <a href="/tags/node-js/" style="font-size: 11.11px;">Node.js</a> <a href="/tags/oracle/" style="font-size: 11.11px;">Oracle</a> <a href="/tags/php/" style="font-size: 12.22px;">PHP</a> <a href="/tags/pl-sql/" style="font-size: 10px;">PL/SQL</a> <a href="/tags/parseservercookie/" style="font-size: 10px;">ParseServerCookie</a> <a href="/tags/performance/" style="font-size: 10px;">Performance</a> <a href="/tags/perl/" style="font-size: 10px;">Perl</a> <a href="/tags/python/" style="font-size: 10px;">Python</a> <a href="/tags/qstring/" style="font-size: 10px;">QString</a> <a href="/tags/qt/" style="font-size: 13.33px;">Qt</a> <a href="/tags/raii/" style="font-size: 10px;">RAII</a> <a href="/tags/rsa/" style="font-size: 10px;">RSA</a> <a href="/tags/raspberry-pi/" style="font-size: 13.33px;">Raspberry Pi</a> <a href="/tags/react/" style="font-size: 10px;">React</a> <a href="/tags/redis/" style="font-size: 10px;">Redis</a> <a href="/tags/refresh/" style="font-size: 10px;">Refresh</a> <a href="/tags/sax/" style="font-size: 12.22px;">SAX</a> <a href="/tags/seh/" style="font-size: 10px;">SEH</a> <a href="/tags/selinux/" style="font-size: 10px;">SELinux</a> <a href="/tags/sql/" style="font-size: 11.11px;">SQL</a> <a href="/tags/schematron/" style="font-size: 11.11px;">Schematron</a> <a href="/tags/shelliconoverlayidentifiers/" style="font-size: 10px;">ShellIconOverlayIdentifiers</a> <a href="/tags/skype/" style="font-size: 10px;">Skype</a> <a href="/tags/teredo/" style="font-size: 10px;">Teredo</a> <a href="/tags/tinker-board/" style="font-size: 10px;">Tinker Board</a> <a href="/tags/tortoisegit/" style="font-size: 10px;">TortoiseGit</a> <a href="/tags/unhandled-exception/" style="font-size: 10px;">Unhandled Exception</a> <a href="/tags/vhashedstringlist/" style="font-size: 11.11px;">VHashedStringList</a> <a href="/tags/vlock/" style="font-size: 11.11px;">VLock</a> <a href="/tags/vrwlock/" style="font-size: 11.11px;">VRWLock</a> <a href="/tags/vuncopyable/" style="font-size: 10px;">VUncopyable</a> <a href="/tags/verqueryvalue/" style="font-size: 10px;">VerQueryValue</a> <a href="/tags/visial-studio/" style="font-size: 10px;">Visial Studio</a> <a href="/tags/visual-c/" style="font-size: 10px;">Visual C++</a> <a href="/tags/visual-studio-2010/" style="font-size: 13.33px;">Visual Studio 2010</a> <a href="/tags/wcf/" style="font-size: 10px;">WCF</a> <a href="/tags/when/" style="font-size: 10px;">WHEN</a> <a href="/tags/wsdl/" style="font-size: 10px;">WSDL</a> <a href="/tags/web-service/" style="font-size: 10px;">Web Service</a> <a href="/tags/wi-fi/" style="font-size: 10px;">Wi-Fi</a> <a href="/tags/xe-2/" style="font-size: 11.11px;">XE 2</a> <a href="/tags/xe2/" style="font-size: 11.11px;">XE2</a> <a href="/tags/xml/" style="font-size: 12.22px;">XML</a> <a href="/tags/xsd/" style="font-size: 12.22px;">XSD</a> <a href="/tags/tchar/" style="font-size: 10px;">_TCHAR</a> <a href="/tags/throwinfo/" style="font-size: 10px;">_ThrowInfo</a> <a href="/tags/aggregate/" style="font-size: 10px;">aggregate</a> <a href="/tags/aggregation/" style="font-size: 10px;">aggregation</a> <a href="/tags/android/" style="font-size: 11.11px;">android</a> <a href="/tags/api/" style="font-size: 10px;">api</a> <a href="/tags/apk/" style="font-size: 10px;">apk</a> <a href="/tags/arm/" style="font-size: 11.11px;">arm</a> <a href="/tags/artificial-intelligence/" style="font-size: 11.11px;">artificial intelligence</a> <a href="/tags/auto-increment/" style="font-size: 10px;">auto-increment</a> <a href="/tags/avahi/" style="font-size: 11.11px;">avahi</a> <a href="/tags/bash/" style="font-size: 10px;">bash</a> <a href="/tags/best-practices/" style="font-size: 10px;">best practices</a> <a href="/tags/bigdata/" style="font-size: 10px;">bigdata</a> <a href="/tags/blog/" style="font-size: 10px;">blog</a> <a href="/tags/blogger/" style="font-size: 10px;">blogger</a> <a href="/tags/blogspot/" style="font-size: 10px;">blogspot</a> <a href="/tags/books/" style="font-size: 10px;">books</a> <a href="/tags/boost/" style="font-size: 11.11px;">boost</a> <a href="/tags/bug/" style="font-size: 11.11px;">bug</a> <a href="/tags/build/" style="font-size: 11.11px;">build</a> <a href="/tags/builder/" style="font-size: 10px;">builder</a> <a href="/tags/certificate/" style="font-size: 11.11px;">certificate</a> <a href="/tags/chinese/" style="font-size: 11.11px;">chinese</a> <a href="/tags/code/" style="font-size: 10px;">code</a> <a href="/tags/comments/" style="font-size: 10px;">comments</a> <a href="/tags/console/" style="font-size: 10px;">console</a> <a href="/tags/cpp/" style="font-size: 18.89px;">cpp</a> <a href="/tags/cryptoapi/" style="font-size: 10px;">cryptoapi</a> <a href="/tags/dataset/" style="font-size: 10px;">dataset</a> <a href="/tags/deep-learning/" style="font-size: 10px;">deep learning</a> <a href="/tags/delphi/" style="font-size: 16.67px;">delphi</a> <a href="/tags/development/" style="font-size: 10px;">development</a> <a href="/tags/dll/" style="font-size: 11.11px;">dll</a> <a href="/tags/eclipse/" style="font-size: 10px;">eclipse</a> <a href="/tags/ethereum/" style="font-size: 14.44px;">ethereum</a> <a href="/tags/exception/" style="font-size: 10px;">exception</a> <a href="/tags/exe/" style="font-size: 10px;">exe</a> <a href="/tags/failure/" style="font-size: 10px;">failure</a> <a href="/tags/fast-insert/" style="font-size: 11.11px;">fast insert</a> <a href="/tags/faucet/" style="font-size: 10px;">faucet</a> <a href="/tags/ffmpeg/" style="font-size: 10px;">ffmpeg</a> <a href="/tags/ftp/" style="font-size: 10px;">ftp</a> <a href="/tags/geth/" style="font-size: 10px;">geth</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/gitalk/" style="font-size: 10px;">gitalk</a> <a href="/tags/github/" style="font-size: 16.67px;">github</a> <a href="/tags/go/" style="font-size: 10px;">go</a> <a href="/tags/google/" style="font-size: 13.33px;">google</a> <a href="/tags/hexo/" style="font-size: 11.11px;">hexo</a> <a href="/tags/highlight/" style="font-size: 10px;">highlight</a> <a href="/tags/howto/" style="font-size: 17.78px;">howto</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/indy/" style="font-size: 11.11px;">indy</a> <a href="/tags/ipv6/" style="font-size: 10px;">ipv6</a> <a href="/tags/itree/" style="font-size: 10px;">itree</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/lib/" style="font-size: 10px;">lib</a> <a href="/tags/light-plus/" style="font-size: 10px;">light-plus</a> <a href="/tags/links/" style="font-size: 10px;">links</a> <a href="/tags/lol/" style="font-size: 12.22px;">lol</a> <a href="/tags/mdns/" style="font-size: 10px;">mDNS</a> <a href="/tags/machine-learning/" style="font-size: 12.22px;">machine learning</a> <a href="/tags/max-connections/" style="font-size: 10px;">max_connections</a> <a href="/tags/mist/" style="font-size: 10px;">mist</a> <a href="/tags/mkdocs/" style="font-size: 10px;">mkdocs</a> <a href="/tags/mkv/" style="font-size: 10px;">mkv</a> <a href="/tags/mongo/" style="font-size: 12.22px;">mongo</a> <a href="/tags/mp4/" style="font-size: 10px;">mp4</a> <a href="/tags/my-ini/" style="font-size: 10px;">my.ini</a> <a href="/tags/mysql/" style="font-size: 11.11px;">mysql</a> <a href="/tags/nodejs/" style="font-size: 11.11px;">nodejs</a> <a href="/tags/oddeven/" style="font-size: 10px;">oddeven</a> <a href="/tags/openssl/" style="font-size: 11.11px;">openssl</a> <a href="/tags/openvpn/" style="font-size: 11.11px;">openvpn</a> <a href="/tags/pagination/" style="font-size: 10px;">pagination</a> <a href="/tags/pip/" style="font-size: 10px;">pip</a> <a href="/tags/plugin/" style="font-size: 10px;">plugin</a> <a href="/tags/pypi/" style="font-size: 10px;">pypi</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/random/" style="font-size: 10px;">random</a> <a href="/tags/reac/" style="font-size: 10px;">reac</a> <a href="/tags/rinkeby/" style="font-size: 11.11px;">rinkeby</a> <a href="/tags/rpi/" style="font-size: 11.11px;">rpi</a> <a href="/tags/search/" style="font-size: 11.11px;">search</a> <a href="/tags/smart-contract/" style="font-size: 13.33px;">smart contract</a> <a href="/tags/sqlite/" style="font-size: 11.11px;">sqlite</a> <a href="/tags/ssl/" style="font-size: 12.22px;">ssl</a> <a href="/tags/string/" style="font-size: 11.11px;">string</a> <a href="/tags/test/" style="font-size: 10px;">test</a> <a href="/tags/testing/" style="font-size: 10px;">testing</a> <a href="/tags/theme/" style="font-size: 10px;">theme</a> <a href="/tags/throttle/" style="font-size: 10px;">throttle</a> <a href="/tags/throttling/" style="font-size: 10px;">throttling</a> <a href="/tags/tinkerboard/" style="font-size: 11.11px;">tinkerboard</a> <a href="/tags/trick/" style="font-size: 10px;">trick</a> <a href="/tags/trie/" style="font-size: 11.11px;">trie</a> <a href="/tags/tuning/" style="font-size: 11.11px;">tuning</a> <a href="/tags/tutorial/" style="font-size: 11.11px;">tutorial</a> <a href="/tags/uncopyable/" style="font-size: 10px;">uncopyable</a> <a href="/tags/version/" style="font-size: 10px;">version</a> <a href="/tags/video/" style="font-size: 10px;">video</a> <a href="/tags/vpn/" style="font-size: 10px;">vpn</a> <a href="/tags/web-development-design/" style="font-size: 10px;">web development & design</a> <a href="/tags/web3/" style="font-size: 10px;">web3</a> <a href="/tags/windows/" style="font-size: 15.56px;">windows</a> <a href="/tags/wsl2/" style="font-size: 11.11px;">wsl2</a> <a href="/tags/youtube/" style="font-size: 10px;">youtube</a> <a href="/tags/zlib/" style="font-size: 10px;">zlib</a> <a href="/tags/%D0%B3%D1%81%D1%87/" style="font-size: 10px;">ГСЧ</a> <a href="/tags/%D0%BF%D0%B8%D1%81%D0%B0%D1%82%D0%B5%D0%BB%D0%B8/" style="font-size: 11.11px;">Писатели</a> <a href="/tags/%D1%81%D1%85%D0%B5%D0%BC%D0%B0%D1%82%D1%80%D0%BE%D0%BD/" style="font-size: 10px;">Схематрон</a> <a href="/tags/%D1%87%D0%B8%D1%82%D0%B0%D1%82%D0%B5%D0%BB%D0%B8/" style="font-size: 11.11px;">Читатели</a> <a href="/tags/%D0%B0%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC/" style="font-size: 12.22px;">алгоритм</a> <a href="/tags/%D0%B0%D0%BD%D0%B5%D0%BA%D0%B4%D0%BE%D1%82%D1%8B/" style="font-size: 11.11px;">анекдоты</a> <a href="/tags/%D0%B1%D0%B0%D0%B3/" style="font-size: 10px;">баг</a> <a href="/tags/%D0%B1%D0%BB%D0%BE%D0%B3/" style="font-size: 11.11px;">блог</a> <a href="/tags/%D0%B1%D0%BB%D0%BE%D0%B3%D0%B8/" style="font-size: 10px;">блоги</a> <a href="/tags/%D0%B1%D0%BE%D1%80/" style="font-size: 11.11px;">бор</a> <a href="/tags/%D0%B1%D1%8B%D1%81%D1%82%D1%80%D0%B0%D1%8F-%D0%B2%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B0/" style="font-size: 11.11px;">быстрая вставка</a> <a href="/tags/%D0%B2-%D0%BE%D0%B4%D0%BD%D1%83-%D1%81%D1%82%D1%80%D0%BE%D0%BA%D1%83/" style="font-size: 10px;">в одну строку</a> <a href="/tags/%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE/" style="font-size: 10px;">видео</a> <a href="/tags/%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F/" style="font-size: 10px;">виртуальная функция</a> <a href="/tags/%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE-%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%B2%D0%B0%D0%BB%D0%BE%D0%B2/" style="font-size: 10px;">дерево интервалов</a> <a href="/tags/%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE-%D0%BE%D1%82%D1%80%D0%B5%D0%B7%D0%BA%D0%BE%D0%B2/" style="font-size: 10px;">дерево отрезков</a> <a href="/tags/%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D1%8F/" style="font-size: 10px;">документация</a> <a href="/tags/%D0%B7%D0%B0%D1%80%D1%8F%D0%B4%D0%BA%D0%B0/" style="font-size: 10px;">зарядка</a> <a href="/tags/%D0%B8%D0%BA%D0%BE%D0%BD%D0%BA%D0%B8/" style="font-size: 10px;">иконки</a> <a href="/tags/%D0%B8%D1%81%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D1%8F/" style="font-size: 10px;">исключения</a> <a href="/tags/%D0%B9%D0%BE%D0%B3%D0%B0/" style="font-size: 10px;">йога</a> <a href="/tags/%D0%BA%D0%B8%D1%82%D0%B0%D0%B9%D1%81%D0%BA%D0%B8%D0%B9-%D1%8F%D0%B7%D1%8B%D0%BA/" style="font-size: 11.11px;">китайский язык</a> <a href="/tags/%D0%BA%D0%BD%D0%B8%D0%B3%D0%B8/" style="font-size: 10px;">книги</a> <a href="/tags/%D0%BA%D0%BE%D0%BC%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%80%D0%B8%D0%B8/" style="font-size: 10px;">комментарии</a> <a href="/tags/%D0%BA%D0%BE%D0%BD%D1%81%D0%BE%D0%BB%D1%8C/" style="font-size: 10px;">консоль</a> <a href="/tags/%D0%BA%D0%BE%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D0%BE%D1%80/" style="font-size: 10px;">конструктор</a> <a href="/tags/%D0%BA%D1%83%D0%BD%D0%B3%D1%84%D1%83/" style="font-size: 10px;">кунгфу</a> <a href="/tags/%D0%BC%D1%83%D0%B7%D1%8B%D0%BA%D0%B0/" style="font-size: 10px;">музыка</a> <a href="/tags/%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C/" style="font-size: 10px;">обновить</a> <a href="/tags/%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%BE%D1%88%D0%B8%D0%B1%D0%BE%D0%BA/" style="font-size: 10px;">обработка ошибок</a> <a href="/tags/%D0%BE%D0%B1%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5/" style="font-size: 10px;">обучение</a> <a href="/tags/%D0%BF%D0%B0%D1%80%D1%81%D0%B5%D1%80/" style="font-size: 11.11px;">парсер</a> <a href="/tags/%D0%BF%D0%B5%D1%80%D0%B5%D0%B5%D0%B7%D0%B4/" style="font-size: 10px;">переезд</a> <a href="/tags/%D0%BF%D0%BE%D0%B8%D1%81%D0%BA/" style="font-size: 10px;">поиск</a> <a href="/tags/%D0%BF%D0%BE%D0%BB%D0%B5%D0%B7%D0%BD%D1%8B%D0%B5-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8/" style="font-size: 20px;">полезные ссылки</a> <a href="/tags/%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80/" style="font-size: 10px;">пример</a> <a href="/tags/%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0/" style="font-size: 10px;">проверка</a> <a href="/tags/%D1%81%D0%B2%D0%B0%D1%80%D0%BA%D0%B0/" style="font-size: 10px;">сварка</a> <a href="/tags/%D1%81%D0%BF%D0%BE%D1%80%D1%82/" style="font-size: 10px;">спорт</a> <a href="/tags/%D1%81%D1%82%D0%B8%D1%85%D0%B8/" style="font-size: 10px;">стихи</a> <a href="/tags/%D1%82%D0%B0%D0%B9%D1%86%D0%B7%D0%B8%D1%86%D1%8E%D0%B0%D0%BD%D1%8C/" style="font-size: 10px;">тайцзицюань</a> <a href="/tags/%D1%82%D1%80%D0%BE%D1%82%D1%82%D0%BB%D0%B8%D0%BD%D0%B3/" style="font-size: 10px;">троттлинг</a> <a href="/tags/%D1%85%D0%BE%D0%B1%D0%B1%D0%B8/" style="font-size: 11.11px;">хобби</a> <a href="/tags/%D1%86%D0%B8%D0%B3%D1%83%D0%BD/" style="font-size: 10px;">цигун</a> <a href="/tags/%D1%8E%D0%BC%D0%BE%D1%80/" style="font-size: 12.22px;">юмор</a>
  </div>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2025 Vitaly Yakovlev
  
</div>
<div class="clearfix"></div></footer>
  
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/jquery.imagesloaded.min.js"></script>


<script src="/js/gallery.js"></script>




<script src="/js/copy-code.js"></script>







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script>
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>
